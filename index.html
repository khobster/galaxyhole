<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <title>Space Cornhole 3D Forward Throw</title>
  <style>
    html, body {
      margin: 0; 
      padding: 0;
      width: 100%; 
      height: 100%;
      overflow: hidden;
      background: #000;  /* Outer background */
      font-family: sans-serif;
    }
    /* The container: sets up perspective so we can see depth */
    #game-container {
      width: 100%; 
      height: 100%;
      perspective: 1000px;          /* camera perspective distance */
      perspective-origin: center center; /* vantage point from the center */
      background: radial-gradient(#003, #000);
      position: relative;
    }

    /* The scene: 3D space for objects */
    #scene {
      width: 100%; 
      height: 100%;
      transform-style: preserve-3d;  /* children remain in 3D */
      transform: rotateX(60deg);     /* tilt so we “look down” slightly */
      position: relative;
    }

    /* The board: sized for demonstration, placed forward (z ~ 800) */
    #board {
      position: absolute;
      width: 200px;
      height: 300px;
      background: #8B4513;
      border: 4px solid #654321;
      border-radius: 6px;
      transform-origin: center center;
    }
    /* The hole in the board */
    #hole {
      position: absolute;
      width: 40px; 
      height: 40px;
      background: black;
      border-radius: 50%;
      left: 50%; 
      top: 15%;
      transform: translate(-50%, -50%);
    }

    /* The bag: a red square in 3D */
    #bag {
      position: absolute;
      width: 40px; 
      height: 40px;
      background: red;
      border-radius: 5px;
      transform-origin: center center;
    }

    /* Simple “Throw!” button at the bottom center */
    #controls {
      position: absolute; 
      bottom: 10px; 
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      z-index: 999;   /* on top */
    }
    button {
      padding: 12px 20px;
      background: #c41e3a;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      text-transform: uppercase;
      transition: background 0.2s;
    }
    button:hover {
      background: #d42e4a;
    }
  </style>
</head>
<body>
<div id="game-container">
  <!-- SCENE: everything in 3D belongs in here -->
  <div id="scene">
    <!-- The board, placed at some forward distance in z -->
    <div id="board">
      <div id="hole"></div>
    </div>
    <!-- The bag near the player (z=0) -->
    <div id="bag"></div>
  </div>
  <!-- Throw button UI -->
  <div id="controls">
    <button id="throwBtn">Throw!</button>
  </div>
</div>

<script>
// We want to place the board out front (z ~ 800), lying “flat” on the ground plane (y=0).
// Then the bag starts near z=0, y=0, x=0 (the player’s position).

const board = document.getElementById('board');
const bag = document.getElementById('bag');

// Place the board in 3D: 
//   x ~ -100 so it’s centered visually, 
//   y=0, 
//   z=800 so it’s away from the camera (the player).
board.style.transform = 'translate3d(-100px, 0px, 800px)';

// The bag will be placed with a function below, but let’s do an initial position:
setBagPosition(0, 0, 0);

// Gravity constant (Earth). You can swap this out for your currentPlanet.gravity
let gravity = 9.81;

// Throw parameters
let angleDeg = 45;    // Throw angle
let speed    = 15;    // Initial speed (some arbitrary scale)
let isThrowing = false;

/**
 * Throw the bag forward with a projectile arc in the y-z plane,
 * ignoring x for a straight throw (x=0).
 */
function throwBag() {
  if (isThrowing) return;
  isThrowing = true;

  // Convert angle to radians
  const angleRad = angleDeg * Math.PI / 180;
  // Record the time the throw starts
  const startTime = performance.now();

  function animateFrame(now) {
    const t = (now - startTime) / 1000; // seconds elapsed
    // Basic projectile equations in y-z:
    //   z(t) = v0 * cos(angle) * t
    //   y(t) = v0 * sin(angle) * t - 0.5 * g * t^2

    // Multiply by some scale factor (like 50) to make the motion big in CSS px
    const scale = 50;

    const zPos = (speed * Math.cos(angleRad) * t) * scale;
    let  yPos = (speed * Math.sin(angleRad) * t - 0.5 * gravity * t * t) * scale;
    
    // If the bag hits the ground (yPos <= 0) => stop
    if (yPos <= 0) {
      yPos = 0; // place exactly on ground
      setBagPosition(0, yPos, zPos);
      isThrowing = false;
      return;
    }

    setBagPosition(0, yPos, zPos);

    // Continue animating if still in flight
    if (isThrowing) {
      requestAnimationFrame(animateFrame);
    }
  }

  requestAnimationFrame(animateFrame);
}

/** Position the bag in 3D using CSS transforms:
 *   x => left-right (we’re leaving it at 0 for a straight shot)
 *   y => vertical (we do -y in CSS so positive y is upward visually)
 *   z => forward/back from the camera
 */
function setBagPosition(x, y, z) {
  bag.style.transform = `translate3d(${x}px, ${-y}px, ${z}px)`;
}

// Hook up the “Throw!” button
document.getElementById('throwBtn').addEventListener('click', throwBag);
</script>
</body>
</html>
